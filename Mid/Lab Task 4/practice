<?php
$errors = [];
$success = "";

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    if (empty($_POST['name'])) {
        $errors['name'] = "Name cannot be empty.";
    } else {
        $name = $_POST['name'];
        if (str_word_count($name) < 2) {
            $errors['name'] = "Name must contain at least two words.";
        } elseif (!preg_match("/^[a-zA-Z]/", $name)) {
            $errors['name'] = "Name must start with a letter.";
        } elseif (!preg_match("/^[a-zA-Z.- ]*$/", $name)) {
            $errors['name'] = "Can contain a-z, A-Z, period, and dash only.";
        }
    }

    if (empty($_POST['email'])) {
        $errors['email'] = "Email cannot be empty.";
    } elseif (!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) {
        $errors['email'] = "Must be a valid email address.";
    }

    $dd = $_POST['dd']; $mm = $_POST['mm']; $yyyy = $_POST['yyyy'];
    if (empty($dd) || empty($mm) || empty($yyyy)) {
        $errors['dob'] = "Date of birth cannot be empty."; 
    } elseif (!($dd >= 1 && $dd <= 31) || !($mm >= 1 && $mm <= 12) || !($yyyy >= 1900 && $yyyy <= 2026)) {
        $errors['dob'] = "Invalid numbers (dd: 1-31, mm: 1-12, yyyy: 1900-2026).";
    }

    if (!isset($_POST['gender'])) {
        $errors['gender'] = "At least one gender must be selected.";
    }

    if (!isset($_POST['degree']) || count($_POST['degree']) < 2) {
        $errors['degree'] = "At least two degrees must be selected.";
    }

    if (empty($_POST['blood_group'])) {
        $errors['blood_group'] = "Blood group must be selected.";
    }

    if (empty($errors)) {
        $success = "Validation Successful!";
    }
}
?>

<!DOCTYPE html>
<html>
<head>
    <title>PHP Form Validation</title>
    <style>
        body { font-family: sans-serif; }
        .form-section { border: 1px solid #ccc; padding: 15px; width: 300px; margin-bottom: 20px; }
        .error { color: red; font-size: 0.8em; display: block; }
        .success { color: green; font-weight: bold; }
    </style>
</head>
<body>

<?php if ($success) echo "<p class='success'>$success</p>"; ?>

<form method="post" action="">
    <fieldset class="form-section">
        <legend><b>NAME</b></legend>
        <input type="text" name="name">
        <?php if(isset($errors['name'])) echo "<span class='error'>".$errors['name']."</span>"; ?>
        <hr><input type="submit" value="Submit">
    </fieldset>

    <fieldset class="form-section">
        <legend><b>EMAIL</b></legend>
        <input type="text" name="email"> <b>i</b>
        <?php if(isset($errors['email'])) echo "<span class='error'>".$errors['email']."</span>"; ?>
        <hr><input type="submit" value="Submit">
    </fieldset>

    <fieldset class="form-section">
        <legend><b>DATE OF BIRTH</b></legend>
        <table>
            <tr>
                <td>dd</td><td>mm</td><td>yyyy</td>
            </tr>
            <tr>
                <td><input type="text" name="dd" size="2"> /</td>
                <td><input type="text" name="mm" size="2"> /</td>
                <td><input type="text" name="yyyy" size="4"></td>
            </tr>
        </table>
        <?php if(isset($errors['dob'])) echo "<span class='error'>".$errors['dob']."</span>"; ?>
        <hr><input type="submit" value="Submit">
    </fieldset>

    <fieldset class="form-section">
        <legend><b>GENDER</b></legend>
        <input type="radio" name="gender" value="Male"> Male
        <input type="radio" name="gender" value="Female"> Female
        <input type="radio" name="gender" value="Other"> Other
        <?php if(isset($errors['gender'])) echo "<span class='error'>".$errors['gender']."</span>"; ?>
        <hr><input type="submit" value="Submit">
    </fieldset>

    <fieldset class="form-section">
        <legend><b>DEGREE</b></legend>
        <input type="checkbox" name="degree[]" value="SSC"> SSC
        <input type="checkbox" name="degree[]" value="HSC"> HSC
        <input type="checkbox" name="degree[]" value="BSc"> BSc
        <input type="checkbox" name="degree[]" value="MSc"> MSc
        <?php if(isset($errors['degree'])) echo "<span class='error'>".$errors['degree']."</span>"; ?>
        <hr><input type="submit" value="Submit">
    </fieldset>

    <fieldset class="form-section">
        <legend><b>BLOOD GROUP</b></legend>
        <select name="blood_group">
            <option value=""></option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="O+">O+</option>
        </select>
        <?php if(isset($errors['blood_group'])) echo "<span class='error'>".$errors['blood_group']."</span>"; ?>
        <hr><input type="submit" value="Submit">
    </fieldset>
</form>

</body>
</html>